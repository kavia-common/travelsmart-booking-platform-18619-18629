{"is_source_file": true, "format": "TypeScript", "description": "This file defines API utility functions for interacting with a backend server, including a fetch wrapper `apiFetch` and a health check function `getHealth`. It manages environment-based API URL configuration and handles JSON responses and errors.", "external_files": ["node-fetch", "types that might be used internally"], "external_methods": ["fetch"], "published": ["API_BASE_URL", "apiFetch", "getHealth"], "classes": [], "methods": [{"name": "export async function apiFetch<T = unknown>(path: string, options: RequestInit = {}): Promise<T>/ apiFetch", "description": "A wrapper function around fetch that sets JSON headers, includes credentials, and handles backend errors for API requests.", "scope": "", "scopeKind": ""}, {"name": "export async function getHealth() { getHealth", "description": "An endpoint function to check backend health status, calls apiFetch with root path.", "scope": "", "scopeKind": ""}], "calls": ["fetch"], "search-terms": ["apiFetch", "Health endpoint", "API_BASE_URL", "fetch wrapper", "TypeScript API client"], "state": 2, "file_id": 16, "knowledge_revision": 90, "git_revision": "", "revision_history": [{"35": ""}, {"90": ""}], "ctags": [{"_type": "tag", "name": "API_BASE_URL", "path": "/home/kavia/workspace/code-generation/travelsmart-booking-platform-18619-18629/nextjs_frontend/src/lib/api.ts", "pattern": "/^export const API_BASE_URL =$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "apiFetch", "path": "/home/kavia/workspace/code-generation/travelsmart-booking-platform-18619-18629/nextjs_frontend/src/lib/api.ts", "pattern": "/^export async function apiFetch<T = unknown>(path: string, options: RequestInit = {}): Promise<T>/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/travelsmart-booking-platform-18619-18629/nextjs_frontend/src/lib/api.ts", "pattern": "/^    const errorMessage = typeof data === 'string' ? data : data?.message || 'Request failed';$/", "language": "TypeScript", "kind": "constant", "scope": "apiFetch", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/travelsmart-booking-platform-18619-18629/nextjs_frontend/src/lib/api.ts", "pattern": "/^  const data = isJson ? await res.json() : (await res.text());$/", "language": "TypeScript", "kind": "constant", "scope": "apiFetch", "scopeKind": "function"}, {"_type": "tag", "name": "errorMessage", "path": "/home/kavia/workspace/code-generation/travelsmart-booking-platform-18619-18629/nextjs_frontend/src/lib/api.ts", "pattern": "/^    const errorMessage = typeof data === 'string' ? data : data?.message || 'Request failed';$/", "language": "TypeScript", "kind": "constant", "scope": "apiFetch", "scopeKind": "function"}, {"_type": "tag", "name": "getHealth", "path": "/home/kavia/workspace/code-generation/travelsmart-booking-platform-18619-18629/nextjs_frontend/src/lib/api.ts", "pattern": "/^export async function getHealth() {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "headers", "path": "/home/kavia/workspace/code-generation/travelsmart-booking-platform-18619-18629/nextjs_frontend/src/lib/api.ts", "pattern": "/^  const headers: HeadersInit = {$/", "language": "TypeScript", "kind": "constant", "scope": "apiFetch", "scopeKind": "function"}, {"_type": "tag", "name": "isJson", "path": "/home/kavia/workspace/code-generation/travelsmart-booking-platform-18619-18629/nextjs_frontend/src/lib/api.ts", "pattern": "/^  const isJson = res.headers.get('content-type')?.includes('application\\/json');$/", "language": "TypeScript", "kind": "constant", "scope": "apiFetch", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/travelsmart-booking-platform-18619-18629/nextjs_frontend/src/lib/api.ts", "pattern": "/^  const res = await fetch(url, { ...options, headers, credentials: 'include' });$/", "language": "TypeScript", "kind": "constant", "scope": "apiFetch", "scopeKind": "function"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/travelsmart-booking-platform-18619-18629/nextjs_frontend/src/lib/api.ts", "pattern": "/^  const url = `${API_BASE_URL}${path}`;$/", "language": "TypeScript", "kind": "constant", "scope": "apiFetch", "scopeKind": "function"}], "hash": "1788a9693fe550bba605ce1d342aa3c9", "format-version": 4, "code-base-name": "nextjs_frontend", "filename": "nextjs_frontend/src/lib/api.ts"}